<!DOCTYPE html>
<html>
    <head>
        <title>Marcus Search </title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" />
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="js/marcus-controller.js"></script>
        <script src="js/lib/awesomplete/awesomplete.js"></script>
        <link rel="stylesheet" href="js/lib/awesomplete/awesomplete.css"/>

        <!-- Local files 
        <script src="js/app.js"></script>
        <script src="js/services.js"></script>
        <script src="js/marcus-controller.js"></script>
        <script src="js/filters.js"></script>
        <script src="js/directives.js"></script>
        -->
        
        <script type="text/javascript">
            
            /**var input = document.querySelector("#search_box");
            var awesomplete = new Awesomplete(document.querySelector("#search_box"));
            
            awesomplete.list = ["Ada", "Java", "JavaScript", "Brainfuck", "LOLCODE", "Node.js", "Ruby on Rails"];
            **/
            
            var ajaxReq;
            ajaxReq = new XMLHttpRequest();
            ajaxReq.open("GET", "suggest", true);
            ajaxReq.onload = function () {
                {
                    var list = JSON.parse(ajaxReq.responseText).suggest_list;
                     //var list =  $scope.suggestion_list;
                    
                    /**var list = JSON.parse(ajaxReq.responseText.suggest_list);
                      .map(function (i) {
                          //alert(i);
                         //return i.name;
                    });**/
                    new Awesomplete(document.querySelector("#search_box"), {list: list});
                }
            };
            ajaxReq.send();
        </script>
    </head>

    <body ng-app="marcus">
        <div class="container container-fluid" style="margin: 0 auto">
            <h1>Marcus SÃ¸k</h1>
            <div ng-controller="freeTextSearch">
                <input id="search_box" 
                       ng-model="query_string" 
                       type="text" placeholder="Search here" 
                       style="width:400px; height:40px;"
                       ng-submit="query_search()" 
                       ng-keyup="auto_complete()">
                <button class="btn btn-large btn-primary" style="height:40px;" ng-click="query_search()">Search</button>
                
                <br>
                <h3>Total hits : {{results.hits.total}}</h3>

                <ul>
                    <li ng-repeat="x in results.hits.hits">
                        {{x._source}}
                    </li>
                    
                    <li>
                        {{suggestion_list.suggest_list}}
                    </li>
                </ul>
                <span>{{log}}</span>
            </div>
        </div>
    </body>
</html>
