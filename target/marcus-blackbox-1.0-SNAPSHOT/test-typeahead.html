<!DOCTYPE html>
<html  ng-app="marcus" lang="no">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Blackbox</title>
        <meta name="description" content="Search Marcus data">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/x-icon" href="http://marcus.uib.no/img/favicon.ico">
        <link rel="stylesheet" href="css/marcus.css">
        <link rel="stylesheet" href="js/lib/typeahead/css/normalize.min.css">
        <link rel="stylesheet" href="js/lib/typeahead/css/main.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" />
    </head>
    <body>
        <div id="searchController"  ng-controller="freeTextSearch">
            <div class="masthead">
                <h1 class="title">Blackbox</h1>
                <div class="Demo">
                    <form action="" method="GET">
                        <input type="hidden" name="index" value="admin">
                        <div class="Typeahead Typeahead--twitterUsers">
                            <div class="u-posRelative">
                                <input class="Typeahead-hint" type="text" tabindex="-1" readonly>
                                <input class="Typeahead-input" id="search-input" type="text" name="q" ng-model="query_string" ng-change="query_search();"  placeholder="Search Marcus...">
                                <img class="Typeahead-spinner" src="js/lib/typeahead/img/spinner.gif" alt="">
                            </div>
                            <div class="Typeahead-menu"></div>
                        </div>
                        <!--button type="submit" class="u-hidden" ng-submit="query_search()">Go</button-->
                    </form>
                </div>
                <span class="links links-examples">
                    <a href="">Advanced search</a>
                </span>
                  <!--b>Selected Facets: </b>{{selected_aggs}} -->
            </div>
            <!--div class="sticky-footer-push"></div-->
            <div class="search-results container-fluid">
                <div class='row row-fluid'>
                    <div class="facets" ng-show="results.hasOwnProperty('aggregations')">
                       <h4>Status</h4>
                       <ul class="nav nav-list">
                            <li ng-repeat="bucket in results.aggregations.status.buckets">
                                <label class="checkbox">
                                    <input type="checkbox" checklist-model="selected_filters" checklist-value="getCheckedValue('status', bucket.key)" ng-click="query_search()">
                                    {{bucket.key}} ({{bucket.doc_count}})
                                </label>
                            </li>
                        </ul>
                       <h4>Assignee</h4>
                       <ul class="nav nav-list">
                            <li ng-repeat="bucket in results.aggregations.assigned_to.buckets">
                                <label class="checkbox">
                                    <input type="checkbox" checklist-model="selected_filters" checklist-value="getCheckedValue('assigned_to', bucket.key)" ng-click="query_search()">
                                    {{bucket.key}} ({{bucket.doc_count}})
                                </label>
                            </li>
                        </ul>
                    </div>
                
                <div class="search-hits">
                    <h4 ng-show="results.hits.total > 0"> Total hits : {{results.hits.total}}</h4>
                    <ul>
                        <li ng-repeat="x in results.hits.hits">
                            {{x._source}}
                        </li>
                    </ul>
                </div>
                </div>
            </div>
        </div>


        <script id="result-template" type="text/x-handlebars-template">
            <div class="ProfileCard u-cf">
            <div class="ProfileCard-details">
            <div class="ProfileCard-realName">{{value}}</div>
            <div class="ProfileCard-screenName"></div>
            <div class="ProfileCard-description">{{value}}</div>
            </div>
            </div>
        </script>

        <script id="empty-template" type="text/x-handlebars-template">
            <div class="EmptyMessage">Your search turned up 0 results.</div>
        </script>
        
        <!--JavaScript files -->
        <script src="js/lib/typeahead/js/handlebars.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="js/lib/typeahead/js/jquery.xdomainrequest.min.js"></script>
        <script src="js/lib/typeahead/js/typeahead.bundle.js"></script>
        <script src="js/lib/typeahead/js/main.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <script src="js/marcus-controller.js"></script>
        <script src="js/checklist-directive.js"></script>
        
        <!--These are constants for this particular page-->
        <script>
                   angular.module("settings", [])
                   .constant("mySettings", {
                       index: "eddie",
                       type : "diddie",
                       facets: [{"field": "status", "size": 15}]
           });
        </script>
    
    </body>
</html>
